import{a as F}from"./chunk-JCXPUJDB.js";import{c as L,d as N,f as A,m as h}from"./chunk-REVKHD3T.js";import{$a as z,Aa as k,Ga as S,Ha as v,O as y,P as x,S as w,Xa as u,Y as m,Ya as _,Z as p,Za as I,_a as D,ab as U,bb as t,cb as n,db as c,gb as C,jb as f,kb as d,nb as o,ob as g,pb as T,qb as V,sa as E,sb as R,ub as j,wa as l}from"./chunk-B52JD5TZ.js";var b=class i{constructor(r){this.http=r}API=`${F.apiUrl}/api/users`;getCurrentUser(){return this.http.get(`${this.API}/me`)}static \u0275fac=function(e){return new(e||i)(w(A))};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})};function B(i,r){if(i&1){let e=C();t(0,"div",5),f("click",function(){m(e);let a=d();return p(a.closeErrorModal())}),t(1,"div",6),f("click",function(a){return m(e),p(a.stopPropagation())}),t(2,"div",7)(3,"h3"),o(4,"Error"),n(),t(5,"button",8),f("click",function(){m(e);let a=d();return p(a.closeErrorModal())}),c(6,"i",9),n()(),t(7,"div",10)(8,"div",11),c(9,"i",12),n(),t(10,"p"),o(11),n()(),t(12,"div",13)(13,"button",14),f("click",function(){m(e);let a=d();return p(a.closeErrorModal())}),o(14,"OK"),n()()()()}if(i&2){let e=d();l(11),g(e.errorMessage)}}function G(i,r){i&1&&(t(0,"span",44),o(1,"\u2022"),n())}function K(i,r){if(i&1&&(t(0,"span",43),o(1),n(),u(2,G,2,0,"span",44)),i&2){let e=r.$implicit,s=r.$index,a=r.$count;l(),g(e),l(),_(s!==a-1?2:-1)}}function q(i,r){i&1&&(t(0,"span",35),c(1,"i",45),o(2," Active "),n())}function J(i,r){i&1&&(t(0,"span",36),c(1,"i",46),o(2," Inactive "),n())}function Q(i,r){if(i&1){let e=C();t(0,"div",2)(1,"div",15)(2,"div",16)(3,"img",17),f("error",function(a){m(e);let Y=d();return p(Y.handleImageError(a))}),n(),t(4,"div",18),c(5,"i",19),n()(),t(6,"div",20)(7,"h2"),o(8),n(),t(9,"p",21),o(10),n(),t(11,"p",22),o(12),n(),t(13,"div",23),D(14,K,3,2,null,null,I),n()()(),t(16,"div",24)(17,"div",25)(18,"h3"),o(19,"Profile Information"),n(),t(20,"div",26)(21,"div",27)(22,"div",28),c(23,"i",29),n(),t(24,"div",30)(25,"span",31),o(26,"User ID"),n(),t(27,"span",32),o(28),n()()(),t(29,"div",27)(30,"div",28),c(31,"i",33),n(),t(32,"div",30)(33,"span",31),o(34,"User since"),n(),t(35,"span",32),o(36),R(37,"date"),n()()(),t(38,"div",27)(39,"div",28),c(40,"i",34),n(),t(41,"div",30)(42,"span",31),o(43,"Status"),n(),u(44,q,3,0,"span",35)(45,J,3,0,"span",36),n()(),t(46,"div",27)(47,"div",28),c(48,"i",37),n(),t(49,"div",30)(50,"span",31),o(51,"Username"),n(),t(52,"span",32),o(53),n()()()()()(),t(54,"div",38)(55,"button",39),f("click",function(){m(e);let a=d();return p(a.editProfile())}),c(56,"i",40),o(57," Edit Profile "),n(),t(58,"button",41),f("click",function(){m(e);let a=d();return p(a.changePassword())}),c(59,"i",42),o(60," Change Password "),n()()()}if(i&2){let e=d();l(3),U("src",e.user.avatarUrl||"img/noprofile.png",E),l(5),V("",e.user.firstName," ",e.user.lastName),l(2),T("@",e.user.username),l(2),g(e.user.email),l(2),z(e.user.roles),l(14),g(e.user.id),l(8),g(j(37,9,e.user.createdAt,"longDate")),l(8),_(e.user.enabled?44:45),l(9),g(e.user.username)}}function W(i,r){if(i&1){let e=C();t(0,"div",3)(1,"div",47),c(2,"i",48),n(),t(3,"h3"),o(4,"No profile information found"),n(),t(5,"p"),o(6,"Try reloading the page or contacting support"),n(),t(7,"button",49),f("click",function(){m(e);let a=d();return p(a.loadProfile())}),c(8,"i",50),o(9," Retry "),n()()}}function X(i,r){i&1&&(t(0,"div",4)(1,"div",51),c(2,"i",52),n(),t(3,"p"),o(4,"Loading profile..."),n()())}var P=class i{constructor(r){this.userService=r}user=null;errorMessage="";isLoading=!1;ngOnInit(){this.loadProfile()}loadProfile(){this.isLoading=!0,this.errorMessage="",this.userService.getCurrentUser().subscribe({next:r=>{this.user=r,this.isLoading=!1},error:r=>{console.error("Error loading profile:",r),this.errorMessage=this.getErrorMessage(r),this.isLoading=!1,this.user=null}})}getErrorMessage(r){return r.status===0?"Connection error. Check your internet connection.":r.status===401?"Unauthorized. Please log in again.":r.status===403?"You do not have permissions to view this profile.":r.status===404?"Profile not found.":r.status>=500?"Server error. Please try again later.":r.error?.message||r.error?.detail||"Unknown error while loading the profile."}closeErrorModal(){this.errorMessage=""}handleImageError(r){let e=r.target;e.src="assets/images/default-avatar.png"}editProfile(){console.log("Edit profile",this.user)}changePassword(){console.log("Change password")}retryLoad(){this.loadProfile()}getFormattedRoles(){return this.user?.roles?this.user.roles.map(r=>({ROLE_USER:"User",ROLE_ADMIN:"Administrator",ROLE_MODERATOR:"Moderator"})[r]||r.replace("ROLE_","").toLowerCase()):[]}static \u0275fac=function(e){return new(e||i)(k(b))};static \u0275cmp=S({type:i,selectors:[["app-profile-detail"]],standalone:!1,decls:5,vars:3,consts:[[1,"profile-container"],[1,"modal-overlay"],[1,"profile-card"],[1,"no-data"],[1,"loading-container"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["aria-label","Close modal",1,"modal-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"modal-icon"],[1,"fas","fa-exclamation-triangle"],[1,"modal-footer"],[1,"modal-button",3,"click"],[1,"profile-header"],[1,"avatar-container"],["alt","Profile photo",1,"profile-avatar",3,"error","src"],[1,"avatar-overlay"],[1,"fas","fa-camera"],[1,"profile-info"],[1,"username"],[1,"email"],[1,"roles"],[1,"profile-details"],[1,"detail-section"],[1,"detail-grid"],[1,"detail-item"],[1,"detail-icon"],[1,"fas","fa-id-card"],[1,"detail-content"],[1,"label"],[1,"value"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-user-check"],[1,"value","status-active"],[1,"value","status-inactive"],[1,"fas","fa-user-tag"],[1,"profile-actions"],[1,"action-button","primary",3,"click"],[1,"fas","fa-edit"],[1,"action-button","secondary",3,"click"],[1,"fas","fa-key"],[1,"role-badge"],[1,"role-separator"],[1,"fas","fa-check-circle"],[1,"fas","fa-times-circle"],[1,"no-data-icon"],[1,"fas","fa-user-slash"],[1,"retry-button",3,"click"],[1,"fas","fa-redo"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,s){e&1&&(t(0,"div",0),u(1,B,15,1,"div",1),u(2,Q,61,12,"div",2)(3,W,10,0,"div",3),u(4,X,5,0,"div",4),n()),e&2&&(l(),_(s.errorMessage?1:-1),l(),_(s.user?2:s.isLoading?-1:3),l(2),_(s.isLoading?4:-1))},dependencies:[L],styles:["[_ngcontent-%COMP%]:root{--color-bg-primary: #0a0a0a;--color-bg-secondary: #141414;--color-bg-tertiary: #1a1a1a;--color-border: #2a2a2a;--color-text-primary: #e0e0e0;--color-text-secondary: #c0c0c0;--color-accent: #404040;--color-accent-light: #606060;--color-success: #1dd1a1;--color-warning: #feca57;--color-error: #ff6b6b;--color-info: #54a0ff}.profile-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem 1rem;min-height:100vh;background:linear-gradient(135deg,var(--color-bg-primary) 0%,var(--color-bg-secondary) 100%);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.profile-card[_ngcontent-%COMP%]{background:#1a1a1ab3;border:1px solid var(--color-border);border-radius:16px;padding:2.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 10px 25px #0000004d;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:3rem;padding-bottom:2rem;border-bottom:1px solid var(--color-border)}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:1.5rem}}.avatar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:transform .3s ease}.avatar-container[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.avatar-container[_ngcontent-%COMP%]:hover   .avatar-overlay[_ngcontent-%COMP%]{opacity:1}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:10%;object-fit:cover;border:3px solid var(--color-accent);box-shadow:0 4px 15px #0000004d}.avatar-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;border-radius:10%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease;color:var(--color-text-primary);font-size:1.5rem}.profile-info[_ngcontent-%COMP%]{flex:1}.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:600;color:var(--color-text-primary);margin:0 0 .3rem;letter-spacing:.5px}@media (max-width: 768px){.profile-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}}.profile-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{color:var(--color-accent-light);font-size:1.2rem;margin:0 0 .5rem;font-weight:500}.profile-info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:1.1rem;margin:0 0 1rem}.roles[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.role-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-accent-light) 100%);color:#fff;padding:.4rem 1rem;border-radius:20px;font-size:.85rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.role-separator[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-weight:700}.detail-section[_ngcontent-%COMP%]{margin-bottom:2.5rem}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1.5rem;margin-bottom:1.5rem;font-weight:600;border-left:4px solid var(--color-accent);padding-left:1rem}.detail-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}@media (max-width: 768px){.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.2rem;background:var(--color-bg-tertiary);border-radius:12px;border:1px solid var(--color-border);transition:transform .2s ease,box-shadow .2s ease}.detail-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0003}.detail-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-accent-light) 100%);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.1rem}.detail-content[_ngcontent-%COMP%]{flex:1}.detail-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:var(--color-text-secondary);font-size:.9rem;margin-bottom:.3rem;font-weight:500}.detail-content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:block;color:var(--color-text-primary);font-size:1.1rem;font-weight:600}.status-active[_ngcontent-%COMP%]{color:var(--color-success)!important}.status-active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.status-inactive[_ngcontent-%COMP%]{color:var(--color-error)!important}.status-inactive[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.profile-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;padding-top:2rem;border-top:1px solid var(--color-border)}@media (max-width: 480px){.profile-actions[_ngcontent-%COMP%]{flex-direction:column}}.action-button[_ngcontent-%COMP%]{flex:1;padding:1rem 1.5rem;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.action-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.action-button.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-accent) 0%,var(--color-accent-light) 100%);color:var(--color-text-primary)}.action-button.primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #6060604d}.action-button.secondary[_ngcontent-%COMP%]{background:transparent;color:var(--color-text-secondary);border:2px solid var(--color-border)}.action-button.secondary[_ngcontent-%COMP%]:hover{background:var(--color-bg-tertiary);color:var(--color-text-primary);border-color:var(--color-accent)}.no-data[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--color-text-secondary)}.no-data[_ngcontent-%COMP%]   .no-data-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;color:var(--color-text-secondary);opacity:.7}.no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);margin-bottom:1rem;font-size:1.5rem}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.1rem}.retry-button[_ngcontent-%COMP%]{background:var(--color-accent);color:var(--color-text-primary);border:none;padding:1rem 2rem;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:.5rem}.retry-button[_ngcontent-%COMP%]:hover{background:var(--color-accent-light);transform:translateY(-2px)}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--color-text-secondary)}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1.5rem;color:var(--color-accent)}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:0;width:90%;max-width:400px;border:1px solid #333;box-shadow:0 20px 40px #0009;animation:_ngcontent-%COMP%_modalSlideUp .4s ease-out;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #333;background:linear-gradient(135deg,#2a2a2a,#1e1e1e)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-error);font-size:1.3rem;font-weight:600;margin:0}.modal-close[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid #333;color:var(--color-text-secondary);cursor:pointer;padding:.5rem;border-radius:6px;transition:all .2s ease;font-size:1.2rem}.modal-close[_ngcontent-%COMP%]:hover{color:var(--color-text-primary);background:#fff3}.modal-body[_ngcontent-%COMP%]{padding:2rem 1.5rem;text-align:center}.modal-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--color-error);margin-bottom:1rem}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1.1rem;line-height:1.5;margin:0}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem;text-align:center;border-top:1px solid #333}.modal-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ff5252);color:#fff;border:none;padding:.8rem 2rem;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.modal-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff5252,#ff3838);transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{opacity:0;transform:translateY(50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}@media (max-width: 768px){.profile-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.profile-header[_ngcontent-%COMP%]{gap:1.5rem}.profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px}.detail-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:.8rem}.detail-icon[_ngcontent-%COMP%]{width:35px;height:35px;font-size:1rem}}"]})};var Z=[{path:"detail",component:P}],M=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=v({type:i});static \u0275inj=x({imports:[h.forChild(Z),h]})};var H=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=v({type:i});static \u0275inj=x({imports:[N,M]})};export{H as a};
